{% extends "base.html" %}

{% block content %}
	<div class="ibox-content forum-container">
		<!-- Header for user control panel -->
		<div class="row">
			<div class="col-md-12">
				<h3 class="text-break">Admin panel</h3>
				<p>Here you can view users and edit their user roles.</p>
			</div>
		</div>
		<!-- List all users -->
		{% for row in users %}
			<div class="forum-item">
				<!-- Individual user info -->
				<div class="row">
					<div class="col-md-2">
						<b>User ID</b>
					</div>
					<div class="col-md-10">{{ row.user_id }}</div>
				</div>
				<hr>
				<div class="row">
					<div class="col-md-2"><b>Username</b></div>
					<div class="col-md-4">{{ row.username }}</div>
					<div class="col-md-2"><b>Email</b></div>
					<div class="col-md-4">{{ row.email }}</div>
				</div>
				<hr>
				<div class="row">
					<div class="col-md-2"><b>Registered</b></div>
					<div class="col-md-4">{{ row.account_created.strftime("%d.%m.%Y @ %H:%M") }}</div>
					<div class="col-md-2"><b>Last login</b></div>
					<div class="col-md-4">{{ row.last_login.strftime("%d.%m.%Y @ %H:%M") }}</div>
				</div>
				<hr>
				<div class="row">
					<div class="col-md-2"><b>User role</b></div>
					<div class="col-md-10">
						<form action="/admin" method="post">
							<label for="user_role_select"></label>
							<select class="form-control-sm" id="user_role_select" name="user_role">
								<option selected="selected">{{ row.user_role }}</option>
								<option value="ADMIN">ADMIN</option>
								<option value="SECRET">SECRET</option>
								<option value="USER">USER</option>
								<option value="BANNED">BANNED</option>
								<option value="DELETED">DELETED</option>
							</select>
							<input type="hidden" name="user_id" value="{{ row.user_id }}">
							<button type="submit" class="btn btn-primary btn-sm float-right"
									name="save_changes" value="{{ row.user_id }}">
								Save changes
							</button>
						</form>
					</div>
				</div>
				<br/>
			</div>
		{% endfor %}
	</div>
{% endblock %}